<menu>{% for a in subnav %}{% capture fullpath %}/{{ dir | join: '/' }}/{{ a.ref }}.html{% endcapture %}
  <a{% if page.url contains fullpath %} class="active"{% endif %} href="/{{ dir | join: '/' }}/{{ a.ref }}.html">
    * {{ a.title }}
  </a>{% if a.nav %}{% assign subnav = a.nav %}{% assign dir = a.ref %}
  {% include subnav.html %}{% endif %}{% endfor %}
</menu>
